name: Rotate Product Configuration

on:
  workflow_dispatch:  
  push:
    branches:
      - main
    tags:
      # Simple pattern for version tags (includes prerelease and build metadata)
      - '[0-9]+.[0-9]+.[0-9]+*'

jobs:
  rotate-config:
    name: Rotate product config
    permissions:
      actions: write
    
    secrets:
      token: ${{ secrets.ROTATOR_TOKEN }}
    
    uses: thetechcollective/gh-rotator/.github/workflows/dispatch.yml@experimental
    
    with:
      product-repo: config-rotator/product-sample
      product-workflow: .github/workflows/rotator.yml
